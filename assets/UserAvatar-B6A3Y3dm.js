import{_ as k}from"./PageContainer-B49UBuJn.js";import{S as y,r as p,t as i,v as a,n as o,B as s,q as E,g as r,y as w,U as _,bO as B,W as S,E as x,aV as d,bP as A}from"./index-Cri_HRKV.js";import{_ as b,E as R}from"./_plugin-vue_export-helper-D5PTBCD6.js";import{E as V}from"./el-progress-DJaR73Ph.js";import"./el-message-DyJ5fjsb.js";import"./isEqual-DHy1KNW7.js";const C=["src"],N={__name:"UserAvatar",setup(q){const l=y(),t=p(l.user.user_pic),n=p(),f=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{t.value=e.result}},m=async()=>{await B(t.value),await l.getUser(),S.success("头像更新成功")};return(c,e)=>{const v=x,g=V,u=R,U=k;return o(),i(U,{title:"更换头像"},{default:a(()=>[s(g,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":f},{default:a(()=>[t.value?(o(),E("img",{key:0,src:t.value,class:"avatar"},null,8,C)):(o(),i(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[s(r(d))]),_:1}))]),_:1},512),e[3]||(e[3]=w("br",null,null,-1)),s(u,{onClick:e[0]||(e[0]=z=>n.value.$el.querySelector("input").click()),type:"primary",icon:r(d),size:"large"},{default:a(()=>e[1]||(e[1]=[_("选择图片")])),_:1},8,["icon"]),s(u,{onClick:m,type:"success",icon:r(A),size:"large"},{default:a(()=>e[2]||(e[2]=[_("上传头像")])),_:1},8,["icon"])]),_:1})}}},O=b(N,[["__scopeId","data-v-5e6edf44"]]);export{O as default};
