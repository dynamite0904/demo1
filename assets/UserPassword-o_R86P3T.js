import{_ as V}from"./PageContainer-B49UBuJn.js";import{r as m,S as k,t as x,v as t,n as U,B as r,U as _,X as y,b$ as F,W as S}from"./index-Cri_HRKV.js";import{E as B,a as C}from"./el-col-p86iBwUK.js";import{E as N,a as P}from"./el-form-item-DtewV-5p.js";import{E as R}from"./_plugin-vue_export-helper-D5PTBCD6.js";import{E as q}from"./el-input-CGJVTIfD.js";import"./el-message-DyJ5fjsb.js";const G={__name:"UserPassword",setup(A){const o=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{min:6,max:15,message:"原密码长度在6到15个字符之间",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:15,message:"新密码长度在6到15个字符之间",trigger:"blur"},{validator:(d,e,l)=>{if(e===o.value.old_pwd)return l(new Error("密码不能与原密码一样"));l()},trigger:"blur"}],re_pwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:15,message:"确认密码长度在6到15个字符之间",trigger:"blur"},{validator:(d,e,l)=>{if(e!==o.value.new_pwd)return l(new Error("确认密码必须和新密码一样"));l()},trigger:"blur"}]},n=m(),u=k(),w=y(),f=async()=>{await n.value.validate(),await F(o.value),S.success("修改密码成功"),u.setToken(""),u.setUser({}),w.push("/login")},c=()=>{n.value.resetFields()};return(d,e)=>{const l=q,a=N,p=R,g=P,v=B,b=C,E=V;return U(),x(E,{title:"修改密码"},{default:t(()=>[r(b,null,{default:t(()=>[r(v,{span:12},{default:t(()=>[r(g,{model:o.value,rules:i,ref_key:"formRef",ref:n,"label-width":"120px"},{default:t(()=>[r(a,{label:"原密码",prop:"old_pwd"},{default:t(()=>[r(l,{type:"password",modelValue:o.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.old_pwd=s)},null,8,["modelValue"])]),_:1}),r(a,{label:"新密码",prop:"new_pwd"},{default:t(()=>[r(l,{type:"password",modelValue:o.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.new_pwd=s)},null,8,["modelValue"])]),_:1}),r(a,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[r(l,{type:"password",modelValue:o.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.re_pwd=s)},null,8,["modelValue"])]),_:1}),r(a,null,{default:t(()=>[r(p,{type:"primary",onClick:f},{default:t(()=>e[3]||(e[3]=[_("修改密码")])),_:1}),r(p,{onClick:c},{default:t(()=>e[4]||(e[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{G as default};
